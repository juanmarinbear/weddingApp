<div class="loading-bg" ng-show="loading">
  <div class="loading absolute-center">
    <p><i class="icon ion-loading-c"></i></p>
  </div>
</div>
<div class="pure-g">
  <div class="pure-u-1-6"></div>
  <div class="pure-u-2-3">
    <h1>RSVP</h1>
    <div class="well">
      <form class="pure-form rsvp-form" name="rsvpForm" novalidate>
        <div class="pure-g">
          <div class="pure-u-1 pure-u-md-1-4">
            <div class="input-group">
              <label for="first-name">First Name</label>
              <input id="first-name" type="text" name="name" placeholder="First Name" ng-model="data.name" required></input>
            </div>
          </div>
          <div class="pure-u-1 pure-u-md-1-4">
            <div class="input-group">
              <label for="last-name">Last Name</label>
              <input id="last-name" type="text" name="last" placeholder="Last Name" ng-model="data.last" required></input>
            </div>
          </div>
          <div class="pure-u-1 pure-u-md-1-4">
            <div class="input-group">
              <label for="email">Email</label>
              <input id="email" type="email" name="email" placeholder="Email" ng-model="data.email" required></input>
            </div>
          </div>
          <div class="pure-u-1 pure-u-md-1-4">
            <div class="input-group">
              <label for="rsvp">Coming to the wedding?</label>
              <select id="rsvp" name="rsvp" ng-model="data.rsvp" required>
                <option value="" selected>-- Select --</option>
                <option value="true">Yes</option>
                <option value="false">No</option>
              </select>
            </div>
          </div>
        </div>
        <div ng-show="data.rsvp === 'true'">
          <div class="pure-g">
            <div class="pure-u-1 pure-u-md-1-4">
              <div class="input-group">
                <label for="country">Country</label>
                <select id="country" name="country" ng-model="data.country" ng-options="country.name for country in geo.countries" ng-required="data.rsvp === 'true'">
                  <option value="" selected>-- Select --</option>
                </select>
              </div>
            </div>
            <div class="pure-u-1 pure-u-md-1-4" ng-hide="data.country.code === 'MX' || data.country.code === 'US'" ng-required="data.rsvp === 'true' && (data.country.code !== 'MX' || data.country.code !== 'US')">
              <div class="input-group">
                <label for="state">State</label>
                <input id="state" type="text" name="state" placeholder="State" ng-model="data.state"></input>
              </div>
            </div>
            <div class="pure-u-1 pure-u-md-1-4" ng-show="data.country.code === 'MX' || data.country.code === 'US'">
              <div class="input-group">
                <label for="state">State</label>
                <select id="state" name="state" ng-model="data.state" ng-options="state.name for state in geo[data.country.code]" ng-required="data.rsvp === 'true' && (data.country.code !== 'MX' || data.country.code !== 'US')">
                  <option value="" selected>-- Select --</option>
                </select>
              </div>
            </div>
            <div class="pure-u-1 pure-u-md-1-4">
              <div class="input-group">
                <label for="city">City</label>
                <input id="city" type="text" name="city" placeholder="City" ng-model="data.city" ng-required="data.rsvp === 'true'"></input>
              </div>
            </div>
            <div class="pure-u-1 pure-u-md-1-4">
              <div class="input-group">
                <label for="zip">Zip Code</label>
                <input id="zip" type="text" name="zip" placeholder="Zip Code" ng-model="data.zip" ng-required="data.rsvp === 'true'"></input>
              </div>
            </div>
          </div>
          <div class="pure-g">
            <div class="pure-u-1 pure-u-md-1-4">
              <div class="input-group">
                <label for="street">Street</label>
                <input id="street" type="text" name="street" placeholder="Street" ng-model="data.street" ng-required="data.rsvp === 'true'"></input>
              </div>
            </div>
            <div class="pure-u-1 pure-u-md-1-4">
              <div class="input-group">
                <label for="number">Number</label>
                <input id="number" type="text" name="number" placeholder="Number" ng-model="data.number" ng-required="data.rsvp === 'true'"></input>
              </div>
            </div>
            <div class="pure-u-1 pure-u-md-1-4">
              <div class="input-group">
                <label for="apt">Apt / Suite</label>
                <input id="apt" type="text" name="apt" placeholder="Apt / Suite" ng-model="data.apt"></input>
              </div>
            </div>
            <div class="pure-u-1 pure-u-md-1-4">
            </div>
          </div>
          <div class="pure-g">
            <div class="pure-u-1 pure-u-md-1-4">
              <div class="input-group">
                <label for="guest">Bringing a guest?</label>
                <select id="guest" name="guest" ng-model="data.guest" ng-required="data.rsvp === 'true'">
                  <option value="" selected>-- Select --</option>
                  <option value="true">Yes</option>
                  <option value="false">No</option>
                </select>
              </div>
            </div>
            <div class="pure-u-md-3-4">
            </div>
          </div>
          <div ng-show="data.guest === 'true'">
            <div class="pure-g">
              <div class="pure-u-1 pure-u-md-1-4">
                <div class="input-group">
                  <label for="guestName">First Name</label>
                  <input id="guestName" type="text" name="guestName" placeholder="First Name" ng-model="data.guestName" ng-required="data.guest === 'true'"></input>
                </div>
              </div>
              <div class="pure-u-1 pure-u-md-1-4">
                <div class="input-group">
                  <label for="guestLast">Last Name</label>
                  <input id="guestLast" type="text" name="guestLast" placeholder="Last Name" ng-model="data.guestLast" ng-required="data.guest === 'true'"></input>
                </div>
              </div>
              <div class="pure-u-1 pure-u-md-1-4">
                <div class="input-group">
                  <label for="guestEmail">Email</label>
                  <input id="guestEmail" type="email" name="guestEmail" placeholder="Email" ng-model="data.guestEmail" ng-required="data.guest === 'true'"></input>
                </div>
              </div>
              <div class="pure-u-1 pure-u-md-1-4">
              </div>
            </div>
          </div>
        </div>
        <div class="pure-g">
          <div class="pure-u-1">
            <div class="input-group center submit">
              <button type="submit" class="pure-button pure-button-primary" ng-click="submit()">Submit</button>
            </div>
          </div>
        </div>
        <div class="pure-g" ng-show=" (submitted && rsvpForm.$invalid) || hasError">
          <div class="pure-u-1">
            <ul>
              <li ng-show="rsvpForm.name.$error.required">Name is required.</li>
              <li ng-show="rsvpForm.last.$error.required">Last Name is required.</li>
              <li ng-show="rsvpForm.email.$error.required">Email is required.</li>
              <li ng-show="rsvpForm.email.$error.email">Email isn't valid.</li>
              <li ng-show="rsvpForm.country.$error.required">Country is required.</li>
              <li ng-show="rsvpForm.state.$error.required">State is required.</li>
              <li ng-show="rsvpForm.city.$error.required">City is required.</li>
              <li ng-show="rsvpForm.zip.$error.required">Zip code is required.</li>
              <li ng-show="rsvpForm.street.$error.required">Street is required.</li>
              <li ng-show="rsvpForm.number.$error.required">Number is required.</li>
              <li ng-show="rsvpForm.guest.$error.required">Are you bringing a guest?</li>
              <li ng-show="rsvpForm.guestName.$error.required">Guest Name is required.</li>
              <li ng-show="rsvpForm.guestLast.$error.required">Guest Last Name is required.</li>
              <li ng-show="rsvpForm.guestEmail.$error.required">Guest Email is required.</li>
              <li ng-show="rsvpForm.guestEmail.$error.email">Guest Email isn't valid.</li>
              <li ng-show="hasError">{{ error.message }}</li>
            </ul>
          </div>
        </div>
      </form>
    </div>
    <div>
      {{ data | json }}
    </div>
    <div>
      {{ rsvpForm | json }}
    </div>
  </div>
  <div class="pure-u-1-6"></div>
</div>
